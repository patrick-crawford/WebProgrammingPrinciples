"use strict";(self.webpackChunkOERTemplate=self.webpackChunkOERTemplate||[]).push([[3195],{248:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Client-side-Validation/Using-JavaScript","title":"Using JavaScript","description":"Using JavaScript","source":"@site/docs/Client-side-Validation/Using-JavaScript.md","sourceDirName":"Client-side-Validation","slug":"/Client-side-Validation/Using-JavaScript","permalink":"/WebProgrammingPrinciples/Client-side-Validation/Using-JavaScript","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/Client-side-Validation/Using-JavaScript.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"Using-JavaScript","title":"Using JavaScript","sidebar_position":2,"description":"Using JavaScript"},"sidebar":"courseNotesSidebar","previous":{"title":"HTML5 Form Validation","permalink":"/WebProgrammingPrinciples/Client-side-Validation/HTML5-Form-Validation"},"next":{"title":"TODO","permalink":"/WebProgrammingPrinciples/JSON-Dynamic-Data/TODO"}}');var r=t(4848),o=t(8453);const a={id:"Using-JavaScript",title:"Using JavaScript",sidebar_position:2,description:"Using JavaScript"},s="Using JavaScript",l={},c=[{value:"JavaScript and Client-Side Validation",id:"javascript-and-client-side-validation",level:2},{value:"Accessing Form Fields",id:"accessing-form-fields",level:3},{value:"Special Cases for Obtaining Form Values",id:"special-cases-for-obtaining-form-values",level:3},{value:"Using the <code>submit</code> Event to Validate Forms with JavaScript",id:"using-the-submit-event-to-validate-forms-with-javascript",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"using-javascript",children:"Using JavaScript"})}),"\n",(0,r.jsx)(n.h2,{id:"javascript-and-client-side-validation",children:"JavaScript and Client-Side Validation"}),"\n",(0,r.jsx)(n.p,{children:"All of the methods above are examples of static checks (i.e., they don't change)\nthat we're adding to our form controls. They do a lot to help guard against\ninvalid data; however, there are times that we need more flexible control\nover what happens."}),"\n",(0,r.jsx)(n.p,{children:"In order to add dynamic checks (i.e., can be changed at runtime) we need to layer\nin use of JavaScript. By using JavaScript we have more freedom to create custom\nand complex validation rules beyond the set of static options provided by HTML\nand the browser. We can also use JavaScript in combination with CSS to provide\na better user experience:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"display more meaningful, context-aware error messages"}),"\n",(0,r.jsx)(n.li,{children:"show/hide error messages depending on the location of the cursor and where the user is focused"}),"\n",(0,r.jsx)(n.li,{children:"place errors (or other information) anywhere in the DOM vs. being limited to labels, placeholder or tooltip text"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"accessing-form-fields",children:"Accessing Form Fields"}),"\n",(0,r.jsx)(n.p,{children:"When writing JavaScript to validate form fields, there are a number of ways\nto access the input controls and get their values. Consider the following\nform:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<form id="info-form" name="info" action="/i">\n  <input id="first-name" name="fname" type="text" />\n  <input id="number-list" name="number-list" type="text" />\n</form>\n'})}),"\n",(0,r.jsx)(n.p,{children:"Here are some of different ways we could access this form:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// 1. Using its id and getElementById()\nvar form = document.getElementById('info-form');\n\n// 2. Using its id and querySelector()\nvar form = document.querySelector('#info-form');\n\n// 3. Using document.forms and the id or name of the form\nvar form = document.forms['info-form'];\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Once we have a reference to the ",(0,r.jsx)(n.code,{children:"<form>"})," element in JavaScript, we can use the\n",(0,r.jsx)(n.code,{children:"name"})," of the form controls to get access to the individual fields and there ",(0,r.jsx)(n.code,{children:".value"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Notice that we must wrap values with '-' in their names in [\"...\"] to access them.\nvar form = document.forms['info-form'];\nvar fname = form.fname.value;\nvar numberList = form['number-list'].value;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"special-cases-for-obtaining-form-values",children:"Special Cases for Obtaining Form Values"}),"\n",(0,r.jsx)(n.p,{children:"Some form controls need different approaches when you want to access their value\nin JavaScript:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<textarea>"}),": use the ",(0,r.jsx)(n.code,{children:".value"})," property to access the text."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'<input type="radio">'}),": use the ",(0,r.jsx)(n.code,{children:"name"})," property (i.e., all radio buttons will use the same ",(0,r.jsx)(n.code,{children:"name"})," in a group) to iterate over all possible radio controls, and then look at the ",(0,r.jsx)(n.code,{children:".checked"})," property, which will be ",(0,r.jsx)(n.code,{children:"true"})," for the one checked."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'<input type="checkbox">'}),": use the ",(0,r.jsx)(n.code,{children:"name"})," property to iterate over all possible radio controls, and then look at the ",(0,r.jsx)(n.code,{children:".checked"})," property, which will be ",(0,r.jsx)(n.code,{children:"true"})," for the one checked."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<select>"}),": use the ",(0,r.jsx)(n.code,{children:"selectedIndex"})," to determine which ",(0,r.jsx)(n.code,{children:"<option>"})," index was selected (if any). A value of ",(0,r.jsx)(n.code,{children:"-1"})," means none are currently selected; a value greater than ",(0,r.jsx)(n.code,{children:"-1"})," indicates the index to use when accessing the ",(0,r.jsx)(n.code,{children:"options[n]"})," array for the chosen option. If the ",(0,r.jsx)(n.code,{children:"<select>"})," is defined to allow for ",(0,r.jsx)(n.code,{children:"multiple"})," options, you can loop through the options and inspect the ",(0,r.jsx)(n.code,{children:".selected"})," property to determine if it's ",(0,r.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Consider the following form:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<form id="info-form" name="info" action="/i">\n  <label for="text">Enter some text</label>\n  <textarea id="text" name="text"></textarea>\n\n  <fieldset>\n    <legend>Pick a Colour</legend>\n\n    <label for="colour-red">Red</label>\n    <input type="radio" name="colour" id="colour-red" value="red" checked />\n\n    <label for="colour-green">Green</label>\n    <input type="radio" name="colour" id="colour-green" value="green" />\n\n    <label for="colour-blue">Red</label>\n    <input type="radio" name="colour" id="colour-blue" value="blue" />\n  </fieldset>\n\n  <label for="agree-disagree">I agree with the terms and conditions.</label>\n  <input type="checkbox" name="agree" id="agree-disagree" />\n\n  <label for="food">Favourite Food</label>\n  <select id="food" name="food">\n    <option value="pizza">Pizza</option>\n    <option value="tacos">Tacos</option>\n    <option value="salad">Salad</option>\n    <option value="other">Other</option>\n  </select>\n</form>\n'})}),"\n",(0,r.jsx)(n.p,{children:"In order to access the form's values in code, we could do the following:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"var form = document.querySelector('#info-form');\n\n// Get the value form the <textarea>\nvar text = form.text.value.trim();\n\n// Get the chosen colour value from the radio button group\nvar colour;\nvar colourChoices = Array.from(form.colour); // convert to array\ncolourChoices.forEach(function (option) {\n  if (option.checked) {\n    colour = option.value;\n  }\n});\n\n// Get the chosen food value form the <select>\nvar food = 'None'; // there may be nothing selected\nvar foodChoices = Array.from(form.food); // convert to array\nfoodChoices.forEach(function (option) {\n  if (option.selected) {\n    food = option.value;\n  }\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"using-the-submit-event-to-validate-forms-with-javascript",children:["Using the ",(0,r.jsx)(n.code,{children:"submit"})," Event to Validate Forms with JavaScript"]}),"\n",(0,r.jsx)(n.p,{children:"There are a wide variety of custom validation tests we can write via JavaScript:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check for the presence or absence of a field"}),"\n",(0,r.jsx)(n.li,{children:"Check the value of a field, and determine if it's within an expected range, of a specific type, etc."}),"\n",(0,r.jsx)(n.li,{children:'Confirm that some value is "real" vs. matching an expected format. (e.g., does a user id exist?)'}),"\n",(0,r.jsx)(n.li,{children:"Evaluate a group of input values together as a group. Do they make sense together?"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["An HTML ",(0,r.jsx)(n.code,{children:"<form>"})," element exposes the ",(0,r.jsx)(n.code,{children:"submit"})," event (and ",(0,r.jsx)(n.code,{children:"onsubmit"})," event property), which\nwe can use to add custom JavaScript code to handle the case that the user is trying to\nsubmit a form:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<form id="info-form" name="info" action="/i">...</form>\n<script>\n  var infoForm = document.getElementById(\'info-form\');\n\n  // submit event fired when the user clicks "submit" button\n  infoForm.onsubmit = function () {\n    // Perform extra validation here.  When finished validating, return\n    // either `true` (form is valid) or `false` (form is invalid) to tell\n    // the browser how to proceed.\n  };\n\n  // reset event fired when the user clicks a "reset" button\n  infoForm.onreset = function () {\n    // If you ever need to do extra work to clear a form, do it here.\n  };\n<\/script>\n'})}),"\n",(0,r.jsx)(n.p,{children:"Consider the example of a form that asks the user to enter a list of 2-4\nnumbers. We'd like to allow the user as much freedom to enter this list as possible,\nand support any style of entry:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<div id="error-msg" class="error hidden"></div>\n\n<form id="info-form" name="info" action="/i">\n  <label for="number-list">Number list</label>\n  <input id="number-list" name="list" type="text" />\n</form>\n<script>\n  var infoForm = document.getElementById(\'info-form\');\n\n  infoForm.onsubmit = function () {\n    // Check if number list is valid, and return true if it is\n    if (validateNumberList()) {\n      // Hide the error message if it was displayed previously\n      hideErrorMessage();\n      return true;\n    }\n\n    // Number list is invalid, so display error message and return false\n    showErrorMessage(\'Number list is invalid: expected 2 to 4 numbers in a list.\');\n    return false;\n  };\n\n  function showErrorMessage(msg) {\n    var errMessage = document.querySelector(\'#error-msg\');\n    // Remove the hidden class so the error message shows.\n    errMessage.classList.remove(\'hidden\');\n    // Set the error message text\n    errMessage.innerHTML = msg;\n  }\n\n  function hideErrorMessage(msg) {\n    var errMessage = document.querySelector(\'#error-msg\');\n    // Add the hidden class so the error message goes away.\n    errMessage.classList.add(\'hidden\');\n  }\n\n  function getNumberList() {\n    // Get the number-list <input> value\n    var list = document.querySelector(\'#number-list\').value;\n\n    // Get rid of leading/trailing spaces\n    list = list.trim();\n\n    // Split the string into an array, separated by spaces, commas, or a combo of each\n    return list.split(/[ ,]+/);\n  }\n\n  function validateNumberList() {\n    var list = getNumberList();\n\n    // Make sure we have between 2 and 4 elements.  If not, return `false`\n    // to indicate this form is invalid (don\'t submit)\n    if (!(list.length >= 2 && list.length <= 4)) {\n      return false;\n    }\n\n    // Make sure each element in the list is a number\n    function isNumber(n) {\n      return !isNaN(n);\n    }\n\n    // Loop across every value in the array, and call isNumber() on the value.\n    // Return true if EVERY element passes isNumber, and false otherwise.\n    return list.every(isNumber);\n  }\n<\/script>\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var i=t(6540);const r={},o=i.createContext(r);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);