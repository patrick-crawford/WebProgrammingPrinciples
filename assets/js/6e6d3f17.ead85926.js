"use strict";(self.webpackChunkOERTemplate=self.webpackChunkOERTemplate||[]).push([[977],{340:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/files/online.html-b6919026d88979f9aead42ac8d8f121c.txt"},3204:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"DOM-Events/Events-Timers","title":"Events & Timers","description":"Events & Timers","source":"@site/docs/DOM-Events/Events-Timers.md","sourceDirName":"DOM-Events","slug":"/DOM-Events/Events-Timers","permalink":"/WebProgrammingPrinciples/DOM-Events/Events-Timers","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/DOM-Events/Events-Timers.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"Events-Timers","title":"Events & Timers","sidebar_position":2,"description":"Events & Timers"},"sidebar":"courseNotesSidebar","previous":{"title":"DOM Introduction","permalink":"/WebProgrammingPrinciples/DOM-Events/DOM-Introduction"},"next":{"title":"Practice Exercise","permalink":"/WebProgrammingPrinciples/DOM-Events/Practice-Exercise"}}');var o=t(4848),i=t(8453);const r={id:"Events-Timers",title:"Events & Timers",sidebar_position:2,description:"Events & Timers"},c="Events & Timers",l={},a=[{value:"Events",id:"events",level:2},{value:"Common Events",id:"common-events",level:2},{value:"The <code>Event</code> Object",id:"the-event-object",level:3},{value:"Timers",id:"timers",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"events--timers",children:"Events & Timers"})}),"\n",(0,o.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,o.jsxs)(n.p,{children:["The DOM relies heavily on a concept known as ",(0,o.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Event-driven_programming",children:"event-driven programming"}),".\nIn event-driven programs,\na main loop (aka the ",(0,o.jsx)(n.em,{children:"event loop"}),"), processes events as they occur."]}),"\n",(0,o.jsx)(n.p,{children:"Examples of events include things like user actions (clicking a button, moving the mouse,\npressing a key, changing tabs in the browser), or browser/code initiated actions (timers,\nmessages from background processes, reports from sensors)."}),"\n",(0,o.jsxs)(n.p,{children:["Instead of writing a program in a strict order, we write functions that should be called\nin response to various events occurring. Such functions are often referred to as\n",(0,o.jsx)(n.em,{children:"event handlers"}),", because they handle the case of some event happening. If there is no\nevent handler for a given event, when it occurs the browser will simply ignore it. However,\nif one or more event handlers are registered to listen for this event, the browser will\ncall each event handler's function in turn."]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"You can think of events like light switches, and event handlers like light fixtures: flipping a light switch on or off triggers an action in the light fixture, or possibly in multiple light fixtures at once. The lights handle the event of the light switch being flipped."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["DOM programming is typically done by writing many functions that execute in response\nto events in the browser. We register our event handlers to indicate that we want a particular\naction to occur. DOM events have a ",(0,o.jsx)(n.code,{children:"name"})," we use to refer to them in code."]}),"\n",(0,o.jsx)(n.p,{children:"We can register a DOM event handler for a given event in one of two ways:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"element.onevent = function(e) {...};"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"element.addEventListener('event', function(e) {...})"})," and ",(0,o.jsx)(n.code,{children:"element.removeEventListener('event', function(e) {...})"})]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["In both cases above, we first need an HTML element. Events are emitted to a ",(0,o.jsx)(n.em,{children:"target"})," element.\nElements in the DOM can trigger one or more events, and we must know the name of the event we want\nto handle."]}),"\n",(0,o.jsxs)(n.p,{children:["In the first method above, ",(0,o.jsx)(n.code,{children:"element.onevent = function(e) {...};"}),", a single event handler is registered\nfor the ",(0,o.jsx)(n.code,{children:"event"})," event connected with the target element ",(0,o.jsx)(n.code,{children:"element"}),". For example, ",(0,o.jsx)(n.code,{children:"document.body.onclick = function(e) {...};"}),",\nindicates we want to register an event handler for the ",(0,o.jsx)(n.code,{children:"click"})," event on the ",(0,o.jsx)(n.code,{children:"document.body"})," element (i.e., ",(0,o.jsx)(n.code,{children:"<body>...</body>"}),")."]}),"\n",(0,o.jsxs)(n.p,{children:["In the second method above, use ",(0,o.jsx)(n.code,{children:"addEventListener()"})," to add as many individual, separate event handlers as we need.\nWhereas ",(0,o.jsx)(n.code,{children:"element.onclick = function(e) {...};"})," binds a single event handler (function) to the ",(0,o.jsx)(n.code,{children:"click"})," event for ",(0,o.jsx)(n.code,{children:"element"}),",\nusing ",(0,o.jsx)(n.code,{children:"element.addEventListener('click', function(e) {...});"})," ",(0,o.jsx)(n.em,{children:"adds"})," a new event handler (function) to any that might already\nexist."]}),"\n",(0,o.jsx)(n.p,{children:"Consider the following code:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"let body = document.body;\n\nfunction handleClick(e) {\n  // Process the click event\n}\n\nfunction handleClick2(e) {\n  // Another click handler\n}\n\nbody.onclick = handleClick;\nbody.onclick = handleClick2;\n// There is only 1 click event handler on body: handleClick2 has replaced handleClick.\n\nbody.addEventListener('click', handleClick);\nbody.addEventListener('click', handleClick2);\n// There are now multiple, unique click handlers bound to the body's click event.\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Because ",(0,o.jsx)(n.code,{children:"addEventListener()"})," is more versatile than the older ",(0,o.jsx)(n.code,{children:"onevent"})," properties, you are\nencouraged to use it in most cases."]}),"\n",(0,o.jsx)(n.p,{children:"Here's an example of the first method, where we only need a single event handler.\nIn the following case, a web page has a Save button, and we want to save the user's\nwork when she clicks it."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<button id=\"btn-save\">Save</button>\n<script>\n  // Get a reference to our Save <button>\n  let saveBtn = document.querySelector('#btn-save');\n\n  function save() {\n    // Save the user's work\n  }\n\n  // Register a single event handler on the save button's click event\n  saveBtn.onclick = function (e) {\n    // Save the user's work, calling a save() function we wrote elsewhere\n    save();\n  };\n<\/script>\n"})}),"\n",(0,o.jsx)(n.p,{children:"Now consider the same code, but with multiple event handlers. In this case\nwe not only want to save the user's work, but also log the information in our\nweb analytics so we can keep track of how popular this feature is (how many times\nit gets clicked):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<span id=\"needs-saving\">Document has changes, Remember to Save!</span>\n...\n<button id=\"btn-save\">Save</button>\n<script>\n  // Get a reference to our Save <button>\n  let saveBtn = document.querySelector('#btn-save');\n\n  // Register first event handler on the save button's click event\n  saveBtn.addEventListener('click', function (e) {\n    // Save the user's work, calling a save() function we wrote elsewhere\n    save();\n\n    // Remove the \"needs to be saved\" info showing in our UI, since we've saved\n    document.querySelector('#btn-save').setAttribute('hidden', true);\n  });\n\n  // Register second event handler on the save button's click event\n  saveBtn.addEventListener('click', function (e) {\n    // Log some info to the console for debugging.\n    console.log('[DEBUG] Save clicked');\n\n    // Use an analytics Object (defined elsewhere) to update our count for this event\n    analytics.increment('save');\n  });\n<\/script>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In this second example, it's possible for the browser to call more than one function\n(event handler) in response to a single event (",(0,o.jsx)(n.code,{children:"click"}),"). What's nice about this is that\ndifferent parts of our code don't have to be combined into a single function. Instead,\nwe can keep things separate (saving logic vs. analytics logic)."]}),"\n",(0,o.jsxs)(n.p,{children:["A complete example of a page that listens for changes to the network online/offline status,\nand updates the page accordingly, is available at ",(0,o.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(340).A+"",children:"online.html"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"common-events",children:"Common Events"}),"\n",(0,o.jsxs)(n.p,{children:["There are ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events",children:"many types of events we can listen for in the DOM"}),",\nsome of which are very specialized to certain elements or Objects. However, there some common ones we'll use quite often:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/load",children:(0,o.jsx)(n.code,{children:"load"})})," - fired when a resource has finished loading (e.g., a ",(0,o.jsx)(n.code,{children:"window"}),", ",(0,o.jsx)(n.code,{children:"img"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload",children:(0,o.jsx)(n.code,{children:"beforeunload"})})," - fired just before the window is about to be unloaded (closed)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/focus",children:(0,o.jsx)(n.code,{children:"focus"})})," - when the element receives focus (cursor input)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/blur",children:(0,o.jsx)(n.code,{children:"blur"})})," - when the element loses focus"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/click",children:(0,o.jsx)(n.code,{children:"click"})})," - when the user single clicks on an element"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/dblclick",children:(0,o.jsx)(n.code,{children:"dblclick"})})," - when the user double clicks on an element"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/contextmenu",children:(0,o.jsx)(n.code,{children:"contextmenu"})})," - when the right mouse button is clicked"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/keypress",children:(0,o.jsx)(n.code,{children:"keypress"})})," - when a key is pressed on the keyboard"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/change",children:(0,o.jsx)(n.code,{children:"change"})})," - when the content of an element changes (e.g., an input element in a form)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/mouseout",children:(0,o.jsx)(n.code,{children:"mouseout"})})," - when the user moves the mouse outside the element"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/mouseover",children:(0,o.jsx)(n.code,{children:"mouseover"})})," - when the user moves the mouse over top of the element"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Events/resize",children:(0,o.jsx)(n.code,{children:"resize"})})," - when the element is resized"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["All of the events described above can be used in either of the two ways we discussed above.\nFor example, if we wanted to use the ",(0,o.jsx)(n.code,{children:"mouseout"})," event on an element:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<div id=\"map\">...</div>\n<script>\n  let map = document.querySelector('map');\n\n  // Method 1: register a single event handler via the on* property\n  map.onmouseout = function (e) {\n    // do something here in response to the mouseout event on this div.\n  };\n\n  // Method 2: register one of perhaps many event handlers via addEventListener\n  map.addEventListener('mouseout', function (e) {\n    // do something here in response to the mouseout event on this div.\n  });\n<\/script>\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"the-event-object",children:["The ",(0,o.jsxs)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Event",children:[(0,o.jsx)(n.code,{children:"Event"})," Object"]})]}),"\n",(0,o.jsx)(n.p,{children:"In the example code above, you may have noticed that our event handler functions often looked like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"element.onclick = function (e) {\n  // e is an instance of the Event object\n};\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The single ",(0,o.jsx)(n.code,{children:"e"})," argument is an instance of the ",(0,o.jsxs)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Event",children:[(0,o.jsx)(n.code,{children:"Event"})," Object"]}),".\nThe ",(0,o.jsx)(n.code,{children:"e"})," or ",(0,o.jsx)(n.code,{children:"event"})," is provided to our event handler function in order to pass information about the event, and to give\nus a chance to alter what happens next."]}),"\n",(0,o.jsxs)(n.p,{children:["For example, we can get a reference to the element to which the event was dispatched using\n",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Event/target",children:(0,o.jsx)(n.code,{children:"e.target"})}),'. We can also instruct\nthe browser to prevent the "default" action from happening as a result of this event using\n',(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault",children:(0,o.jsx)(n.code,{children:"e.preventDefault()"})}),", or\nstop the event from continuing to ",(0,o.jsx)(n.em,{children:"bubble"})," up the DOM (i.e., rise up the DOM tree nodes, triggering\nother event handlers along the way) using ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Event/stopPropagation",children:"`e.stopPropagation()"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Here's an example showing how to use these:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<button id=\"btn\">Click Me</button>\n<script>\n  document.querySelector('#btn').addEventListener('click', function (e) {\n    // Prevent this event from doing anything more, we'll handle it all here.\n    e.preventDefault();\n    e.stopPropagation();\n\n    // Get a reference to the <button> element\n    let btn = e.target;\n\n    // Change the text of the button\n    btn.innerHTML = 'You clicked Me!';\n  });\n<\/script>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Some events also provide specialized (i.e., derived from ",(0,o.jsx)(n.code,{children:"Event"}),") ",(0,o.jsx)(n.code,{children:"event"})," Objects\nwith extra data on them related to the context of the event. For example, a ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent",children:(0,o.jsx)(n.code,{children:"MouseEvent"})}),"\ngives extra detail whenever a click, mouse move, etc. event occurs:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<div id=\"position\"></div>\n<script>\n  document.body.addEventListener('click', function (e) {\n    // Get extra info about this mouse event so we know where the pointer was\n    let x = e.screenX;\n    let y = e.screenY;\n\n    // Display co-ordinates where the mouse was clicked: \"Position (300, 342)\"\n    document.querySelector('#position').innerHTML = `Position (${x}, ${y})`;\n  });\n<\/script>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"timers",children:"Timers"}),"\n",(0,o.jsx)(n.p,{children:"It's also possible for us to write an event handler that happens in response to a timing event (delay) vs.\na user or browser event. Using these timing event handlers, we scheduling a task (function) to run after\na certain period of time has elapsed:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"setTimeout(function, delayMS)"})," - schedule a task (",(0,o.jsx)(n.code,{children:"function"}),") to be run in the future (",(0,o.jsx)(n.code,{children:"delayMS"})," milliseconds from now). Can be cancelled with ",(0,o.jsx)(n.code,{children:"clearTimeout(timerID)"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"setInterval(function, delayMS)"})," - schedule a task (",(0,o.jsx)(n.code,{children:"function"}),") to be run in the future every ",(0,o.jsx)(n.code,{children:"delayMS"})," milliseconds from now. Function will be called repeatedly. Can be cancelled with ",(0,o.jsx)(n.code,{children:"clearInterval(timerID)"})]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Here's an example of using an ",(0,o.jsx)(n.code,{children:"interval"})," to update a web page with the current date and time every 1 second."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<p hidden>The current date and time is <time id=\"current-date\"></time></p>\n<button id=\"btn-start\">Start Timer</button>\n<button id=\"btn-end\">End Timer</button>\n<script>\n  let startButton = document.querySelector('#btn-start');\n  let endButton = document.querySelector('#btn-end');\n  let timerId;\n\n  // When the user clicks Start, start our timer\n  startButton.onclick = function (e) {\n    // If the user clicks it more than once, ignore it once it's running\n    if (timerId) {\n      return;\n    }\n\n    let currentDate = document.querySelector('#current-date');\n    currentDate.removeAttribute('hidden');\n\n    // Start our timer to update every 1000ms (1s), showing the current date/time.\n    timerId = setInterval(function () {\n      let now = new Date();\n      currentDate.innerHTML = now.toLocaleString();\n    }, 1000);\n  };\n\n  endButton.onclick = function (e) {\n    // If the user clicks End when the timer isn't running, ignore it.\n    if (!timerId) {\n      return;\n    }\n\n    // Stop the timer\n    clearInterval(timerId);\n    timerId = null;\n  };\n<\/script>\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var s=t(6540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);