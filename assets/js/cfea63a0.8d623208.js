"use strict";(self.webpackChunkOERTemplate=self.webpackChunkOERTemplate||[]).push([[2704],{8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>o});var r=a(6540);const s={},t=r.createContext(s);function i(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(t.Provider,{value:n},e.children)}},8691:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"JSON-Dynamic-Data/Data-Formats","title":"Data Formats","description":"Data Formats","source":"@site/docs/JSON-Dynamic-Data/Data-Formats.md","sourceDirName":"JSON-Dynamic-Data","slug":"/JSON-Dynamic-Data/Data-Formats","permalink":"/WebProgrammingPrinciples/JSON-Dynamic-Data/Data-Formats","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/JSON-Dynamic-Data/Data-Formats.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"Data-Formats","title":"Data Formats","sidebar_position":2,"description":"Data Formats"},"sidebar":"courseNotesSidebar","previous":{"title":"AJAX Fundamentals","permalink":"/WebProgrammingPrinciples/JSON-Dynamic-Data/AJAX-Fundamentals"},"next":{"title":"Advanced Techniques","permalink":"/WebProgrammingPrinciples/JSON-Dynamic-Data/Advanced Techniques"}}');var s=a(4848),t=a(8453);const i={id:"Data-Formats",title:"Data Formats",sidebar_position:2,description:"Data Formats"},o="Data Formats",d={},l=[{value:"Working with Data: JSON and XML",id:"working-with-data-json-and-xml",level:2},{value:"Example 2: the Dog API",id:"example-2-the-dog-api",level:2},{value:"1. Create a form",id:"1-create-a-form",level:3},{value:"2. Dynamically load dog breeds into a drop-down",id:"2-dynamically-load-dog-breeds-into-a-drop-down",level:3},{value:"3. Get dog breed image URLs when the user selects a breed",id:"3-get-dog-breed-image-urls-when-the-user-selects-a-breed",level:3},{value:"4. Dynamically create &lt;img&gt; elements for all dog breed image URLs",id:"4-dynamically-create-img-elements-for-all-dog-breed-image-urls",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"data-formats",children:"Data Formats"})}),"\n",(0,s.jsx)(n.h2,{id:"working-with-data-json-and-xml",children:"Working with Data: JSON and XML"}),"\n",(0,s.jsxs)(n.p,{children:["Our previous example used a very simple data format: a single number. Often\nwe'll need to work with more complex data, which includes both numbers and text,\nlists, and complex hierarchies. To do this, we need a format that allows us\nto serialize (i.e., turn into strings) data structures like ",(0,s.jsx)(n.code,{children:"Array"}),"s, ",(0,s.jsx)(n.code,{children:"Object"}),"s, etc."]}),"\n",(0,s.jsxs)(n.p,{children:["The two most popular formats for data exchange on the internet are the\n",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/JSON",children:"JavaScript Object Notation (JSON)"})," and the\n",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/XML",children:"Extensible Markup Language (XML)"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"We're going to focus mainly on JSON, but it's good to also know about XML. At\none point, a lot of the techniques we will discuss were done with XML (and many\nlanguages and services still use it). However, much of the internet has\nstandardized on JSON as a data exchange format."}),"\n",(0,s.jsx)(n.p,{children:"Let's look at each in turn. First, consider the following food product data:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"1) Name: Apple\n   Price per Pound: $1.29\n   Location: Aisle 3\n\n2) Name: Carrots\n   Price per Pound: $0.46\n   Location: Aisle 2\n"})}),"\n",(0,s.jsx)(n.p,{children:"Here's how that data might look using XML:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<products>\n    <product>\n        <name>Apple</name>\n        <price currency="CAD">1.29</price>\n        <aisle>3</aisle>\n    </product>\n    <product>\n        <name>Carrots</name>\n        <price currency="CAD">0.46</price>\n        <aisle>2</aisle>\n    </product>\n</products>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Look familiar? XML and HTML are both markup languages. In XML, it's\npossible for us to create our own tags and document structure (i.e., XML Schema).\nYou can think of HTML like an instance of XML, which is what ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/XHTML",children:"XHTML"})," was trying to do."]}),"\n",(0,s.jsx)(n.p,{children:"Before we look at JSON, let's look at that same data in JavaScript, using an Object Literal:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"var products = [\n  {\n    name: 'Apple',\n    price: {\n      currency: 'CAD',\n      value: 1.29,\n    },\n    aisle: 3,\n  },\n  {\n    name: 'Carrots',\n    price: {\n      currency: 'CAD',\n      value: 0.46,\n    },\n    aisle: 2,\n  },\n];\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Here we have two ",(0,s.jsx)(n.code,{children:"Object"}),"s in an ",(0,s.jsx)(n.code,{children:"Array"}),". Our ",(0,s.jsx)(n.code,{children:"Object"}),"s use ",(0,s.jsx)(n.code,{children:"String"}),", ",(0,s.jsx)(n.code,{children:"Object"}),",\nand ",(0,s.jsx)(n.code,{children:"Number"})," types to represent the data."]}),"\n",(0,s.jsx)(n.p,{children:"Finally, let's format the same data in JSON:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "name": "Apple",\n    "price": {\n      "currency": "CAD",\n      "value": 1.29\n    },\n    "aisle": 3\n  },\n  {\n    "name": "Carrots",\n    "price": {\n      "currency": "CAD",\n      "value": 0.46\n    },\n    "aisle": 2\n  }\n]\n'})}),"\n",(0,s.jsx)(n.p,{children:"Looks familiar, doesn't it? You'll be glad to know that since you\nalready learned JavaScript Object Literals, you already learned 95% of JSON format at the same time."}),"\n",(0,s.jsx)(n.p,{children:"JSON and JavaScript Object Literals are very similar, but there are some\ndifferences. JSON is a subset of JavaScript Object Literal notation:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["All keys must be double-quoted strings: ",(0,s.jsx)(n.code,{children:'"key"'})," vs. ",(0,s.jsx)(n.code,{children:"key"})]}),"\n",(0,s.jsx)(n.li,{children:"You don't put comments in JSON"}),"\n",(0,s.jsxs)(n.li,{children:["You can't include function expressions in JSON, only data types:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"String"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Number"})}),"\n",(0,s.jsxs)(n.li,{children:["an (JSON) ",(0,s.jsx)(n.code,{children:"Object"})]}),"\n",(0,s.jsxs)(n.li,{children:["an ",(0,s.jsx)(n.code,{children:"Array"})]}),"\n",(0,s.jsxs)(n.li,{children:["boolean ",(0,s.jsx)(n.code,{children:"true"})," or ",(0,s.jsx)(n.code,{children:"false"})]}),"\n",(0,s.jsxs)(n.li,{children:["the value ",(0,s.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"JavaScript includes built-in code for converting to/from JSON strings:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var products = [\n  {\n    name: \'Apple\',\n    price: {\n      currency: \'CAD\',\n      value: 1.29,\n    },\n    aisle: 3,\n  },\n  {\n    name: \'Carrots\',\n    price: {\n      currency: \'CAD\',\n      value: 0.46,\n    },\n    aisle: 2,\n  },\n];\n// 1. Turn products Object into JSON string\nvar json = JSON.stringify(products);\n// json now equals \'[{"name":"Apple","price":{"currency":"CAD","value":1.29},"aisle":3},{"name":"Carrots","price":{"currency":"CAD","value":0.46},"aisle":2}]\'\n\n// 2. Turn JSON string back into a JS Object\nproducts = JSON.parse(json);\n// products is now an Object\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["NOTE: ",(0,s.jsx)(n.code,{children:"JSON.parse()"})," will ",(0,s.jsx)(n.code,{children:"throw"})," an error if the string isn't properly formatted JSON, so it's good to wrap your call in a ",(0,s.jsx)(n.code,{children:"try...catch"})," block."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"example-2-the-dog-api",children:"Example 2: the Dog API"}),"\n",(0,s.jsx)(n.p,{children:"For our next example, let's work with another web service, but this time\none that returns more complex data in the form of JSON."}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.a,{href:"https://dog.ceo/dog-api/documentation/",children:"Dog API"})," is a free web service\nthat uses data from the ",(0,s.jsx)(n.a,{href:"http://vision.stanford.edu/aditya86/ImageNetDogs/",children:"Stanford Dogs Dataset"}),". This dataset contains\nimages and information about 120 breeds of dogs, and is used for machine learning\nand artificial intelligence training."]}),"\n",(0,s.jsx)(n.p,{children:"There are a number of endpoints we can use with this API, but we'll focus on these:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://dog.ceo/api/breeds/list/all",children:"https://dog.ceo/api/breeds/list/all"})," - get a JSON formatted list of all breeds and sub-breeds"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://dog.ceo/api/breed/hound/images/random/3",children:"https://dog.ceo/api/breed/hound/images/random/3"})," - get a JSON formatted list of image URLs for hounds, returning 3 (we can ask for more or less) In other words the URL works like this: ",(0,s.jsx)(n.code,{children:"https://dog.ceo/api/breed/{name-of-breed}/random/{number-of-images-to-return}"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Our goal is to do the following:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create a simple web page with an HTML ",(0,s.jsx)(n.code,{children:"<form>"})]}),"\n",(0,s.jsxs)(n.li,{children:["Use AJAX techniques to dynamically load all dog breeds into a ",(0,s.jsx)(n.code,{children:"<select>"})," in our form"]}),"\n",(0,s.jsx)(n.li,{children:"Users can specify how many images they want to load: 1 to 100."}),"\n",(0,s.jsxs)(n.li,{children:["When the user selects a breed and clicks a ",(0,s.jsx)(n.code,{children:"<button>"}),", we'll request the JSON list of images"]}),"\n",(0,s.jsxs)(n.li,{children:["Once we get the list of image URLs, we'll start creating ",(0,s.jsx)(n.code,{children:"<img>"})," elements in our page to show those dogs"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["See the completed code in ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:a(8711).A+"",children:"dogs.zip"}),".\nWe'll discuss snippets of the code below."]}),"\n",(0,s.jsx)(n.h3,{id:"1-create-a-form",children:"1. Create a form"}),"\n",(0,s.jsxs)(n.p,{children:["Let's start with a basic ",(0,s.jsx)(n.code,{children:"<form>"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<form id="dogs-form" action="#">\n  <select id="breeds" name="breeds"></select>\n  <input type="number" min="1" max="100" value="5" />\n  <input type="button" id="btn-load" value="Show me dogs!" />\n</form>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Our form is very simple. Notice that it contains no ",(0,s.jsx)(n.code,{children:"<option>"})," elements\nfor the dog breeds. We will load these dynamically once the page is loaded.\nWe include a textbox for entering a number of images to show (default is ",(0,s.jsx)(n.code,{children:"5"}),"),\nand provide a ",(0,s.jsx)(n.code,{children:"<button>"})," to click."]}),"\n",(0,s.jsx)(n.h3,{id:"2-dynamically-load-dog-breeds-into-a-drop-down",children:"2. Dynamically load dog breeds into a drop-down"}),"\n",(0,s.jsx)(n.p,{children:"Next we need to load our dog breeds from the Dogs API. We'll do that\nwhen the page finishes loading, and the DOM is fully created:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"window.onload = function () {\n  loadDogBreeds();\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Our ",(0,s.jsx)(n.code,{children:"loadDogBreeds"})," function needs to create an XHR request to the Dogs API,\nand parse the JSON we get back:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function loadDogBreeds() {\n  // See https://dog.ceo/dog-api/documentation/\n  var url = 'https://dog.ceo/api/breeds/list/all';\n  var xhr = new XMLHttpRequest();\n\n  xhr.onload = function () {\n    var response = JSON.parse(this.responseText);\n    var breedList = extractBreedList(response);\n    updateBreedList(breedList);\n  };\n  xhr.open('GET', url);\n  xhr.send();\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["When our request comes back (i.e., ",(0,s.jsx)(n.code,{children:"xhr.onload"}),"), we'll get a JSON string\nthat looks something like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'"{"status":"success","message":{"affenpinscher":[],"african":[],"airedale":[],"akita":[],"appenzeller":[]}}";\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If we ",(0,s.jsx)(n.code,{children:"JSON.parse()"})," that string, we'll get an ",(0,s.jsx)(n.code,{children:"Object"})," that looks like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var response = JSON.parse(this.responseText);\n/*\n{\n    status: "success",\n    message: {\n        affenpinscher: [],\n        african: [],\n        airedale: [],\n        akita: [],\n        appenzeller: [],\n        ...\n    }\n}\n*/\n'})}),"\n",(0,s.jsx)(n.p,{children:"This data has two main parts:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["a ",(0,s.jsx)(n.code,{children:"status"})," message, that tells us the server was successful in doing our query"]}),"\n",(0,s.jsxs)(n.li,{children:["a ",(0,s.jsx)(n.code,{children:"message"})," body, which is itself an ",(0,s.jsx)(n.code,{children:"Object"})," of key/value pairs, with the breed name and sub-breeds (if any) in an ",(0,s.jsx)(n.code,{children:"Array"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["To get all the dog breeds as a list (i.e. ",(0,s.jsx)(n.code,{children:"Array"}),"), we need to extract the\n",(0,s.jsx)(n.code,{children:"message"})," property, then call ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys",children:(0,s.jsx)(n.code,{children:"Object.keys()"})}),"\non its value to create an ",(0,s.jsx)(n.code,{children:"Array"})," out of all the names:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"var breedList = Object.keys(response);\n/*\n['affenpinscher', 'african', 'airedale', 'akita', 'appenzeller', ...]\n*/\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Next we need to take this list of breed name ",(0,s.jsx)(n.code,{children:"String"}),"s, and create\n",(0,s.jsx)(n.code,{children:"<option>"})," elements that we can dynamically add to our form's ",(0,s.jsx)(n.code,{children:"<select>"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Get a reference to our <select>\nvar select = document.querySelector('#breeds');\n\n// Given a breed name \"beagle\", return an <option value=\"beagle>beagle</option>\nfunction createBreedOption(name) {\n  var option = document.createElement('option');\n  option.value = name;\n  option.innerHTML = name;\n\n  return option;\n}\n\n// Loop through each breed name in our Array, call createBreedOption()\n// and append the <option> element to our <select>\nbreedList.forEach(function (breed) {\n  var breedOption = createBreedOption(breed);\n  select.appendChild(breedOption);\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"Our web page now has a drop-down list with all 120 dog breeds."}),"\n",(0,s.jsx)(n.h3,{id:"3-get-dog-breed-image-urls-when-the-user-selects-a-breed",children:"3. Get dog breed image URLs when the user selects a breed"}),"\n",(0,s.jsxs)(n.p,{children:["When the user selects a breed from our list and clicks a ",(0,s.jsx)(n.code,{children:"<button>"}),",\nwe need to make another HTTP request to the server. This time\nwe need to get a list of image URLs for the chosen breed."]}),"\n",(0,s.jsx)(n.p,{children:"First, we need an event handler for the click:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"var btnLoad = document.querySelector('#btn-load');\n\nbtnLoad.onclick = function (e) {\n  var breed = document.querySelector('#breeds').value;\n  loadBreedImages(breed);\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Our ",(0,s.jsx)(n.code,{children:"loadBreedImages"})," function is nearly identical to ",(0,s.jsx)(n.code,{children:"loadDogBreeds"}),", but\nwe use the ",(0,s.jsx)(n.code,{children:"breed"})," name as part of the URL:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function loadBreedImages(breed) {\n  // See https://dog.ceo/dog-api/documentation/breed\n  // Use the imageCount and breed variables to create our URL\n  var imageCount = document.querySelector('#image-count').value;\n  var url = `https://dog.ceo/api/breed/${breed}/images/random/${imageCount}`;\n  var xhr = new XMLHttpRequest();\n\n  xhr.onload = function () {\n    try {\n      var response = JSON.parse(this.responseText);\n      var breedImageList = extractBreedImageList(response);\n      updateBreedImages(breedImageList);\n    } catch (e) {\n      showError('Unable to load dog breeds');\n    }\n  };\n\n  xhr.open('GET', url);\n  xhr.send();\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["As before, we make a request to the server, and get back JSON, which we\nparse. The resulting ",(0,s.jsx)(n.code,{children:"Object"})," we get back looks like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'{\n    status: "success",\n    message: [\n       "https://images.dog.ceo/breeds/hound-afghan/n02088094_1003.jpg",\n       "https://images.dog.ceo/breeds/hound-afghan/n02088094_1007.jpg",\n       ...\n    ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Once again we get a ",(0,s.jsx)(n.code,{children:"status"})," and a ",(0,s.jsx)(n.code,{children:"message"})," body. This time, however,\nthe ",(0,s.jsx)(n.code,{children:"message"})," is already an ",(0,s.jsx)(n.code,{children:"Array"})," of URLs."]}),"\n",(0,s.jsx)(n.h3,{id:"4-dynamically-create-img-elements-for-all-dog-breed-image-urls",children:"4. Dynamically create <img> elements for all dog breed image URLs"}),"\n",(0,s.jsx)(n.p,{children:"Using the list of URLs for dog breed images from the server, we can\neasily update our page to display new images:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"var imagesContainer = document.querySelector('#images-container');\n\n// Clear the imagesContainer if there is anything there now\nimagesContainer.innerHTML = '';\n\n// Turn a url String into an <img src=\"url\"> element\nfunction createImgElement(url) {\n  var img = document.createElement('img');\n  img.src = url;\n  return img;\n}\n\n// Loop through the image URLs, and create new <img> elements\nbreedImageList.forEach(function (url) {\n  var img = createImgElement(url);\n  imagesContainer.appendChild(img);\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["We've now got a relatively simple page that can be changed using live data\nto look completely different, depending on the needs of the user. We didn't\nhave to write HTML for every image, which would have involved hand-writing\n120 * 150 = 18,000 ",(0,s.jsx)(n.code,{children:"<img>"})," elements! Using AJAX we can do this with very\nlittle code."]}),"\n",(0,s.jsxs)(n.p,{children:["Complete code for the example above can be found in the following file: ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:a(8711).A+"",children:"dogs.zip"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8711:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/files/dogs-6ae21e60bcf57e23bfff5ef3c85273af.zip"}}]);